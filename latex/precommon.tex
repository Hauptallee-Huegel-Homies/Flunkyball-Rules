% chktex-file 1

\usepackage[l2tabu,orthodox]{nag}

\usepackage{iftex}
\newif\ifxetexorluatex
\ifxetex
  \xetexorluatextrue
  \message{Precommon: Detected XeLaTeX}
\else
  \ifluatex
    \xetexorluatextrue
    \message{Precommon: Detected LuaLaTeX}
  \else
    \xetexorluatexfalse
    \message{Precommon: Detected pdfLaTeX}
  \fi
\fi

\ifxetexorluatex
  \usepackage{fontspec}
  \usepackage{polyglossia}
  \ifluatex
    \setsansfont{TeX Gyre Heros}
    \setmainfont[Ligatures=TeX]{Crimson}
  \else
    \setsansfont[
      UprightFont = *-regular,
      BoldFont = *-bold,
      ItalicFont = *-italic,
      BoldItalicFont = *-bolditalic,
      Extension = .otf, % chktex 26
      Scale = 1.0
    ]{texgyreheros}
    \setmainfont[
      Ligatures = TeX,
      UprightFont = *-Roman,
      BoldFont = *-Bold,
      ItalicFont = *-Italic,
      BoldItalicFont = *-BoldItalic,
      Extension = .otf, % chktex 26
      Scale = 1.0
    ]{Crimson}
  \fi
  %\setmonofont{CMU Typewriter Text}
  \ifxetex
    \XeTeXinputnormalization=1
  \fi
\else
  \usepackage[utf8]{inputenc}
  \usepackage[T1]{fontenc}
  \usepackage{tgheros}
  \usepackage{crimson}
  \usepackage{babel}
\fi
